# =============================================================================
# Learning Voice Agent - Production Environment Configuration
# =============================================================================
# CRITICAL: This file contains sensitive configuration for production deployment.
# - NEVER commit this file to version control with real values
# - Store actual secrets in your deployment platform's secret manager
# - Generate strong secrets using: openssl rand -hex 32
# =============================================================================

# -----------------------------------------------------------------------------
# Core Settings
# -----------------------------------------------------------------------------
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Security - CRITICAL (P0)
# -----------------------------------------------------------------------------
# JWT Secret Keys - MUST be at least 32 characters
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY="<GENERATE_STRONG_SECRET_32_CHARS_MIN>"
JWT_REFRESH_SECRET_KEY="<GENERATE_DIFFERENT_STRONG_SECRET>"
JWT_ALGORITHM=HS256
JWT_ACCESS_EXPIRE_MINUTES=15
JWT_REFRESH_EXPIRE_DAYS=7

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Update with your actual production domain(s)
# Format: JSON array of allowed origins
CORS_ORIGINS=["https://yourdomain.com","https://www.yourdomain.com"]

# -----------------------------------------------------------------------------
# Security Headers Configuration
# -----------------------------------------------------------------------------
SECURITY_HEADERS_ENABLED=true
SECURITY_CSP_ENABLED=true
SECURITY_CSP_REPORT_ONLY=false
SECURITY_CSP_REPORT_URI=
SECURITY_HSTS_ENABLED=true
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_HSTS_PRELOAD=true
SECURITY_FRAME_OPTIONS=DENY
SECURITY_REFERRER_POLICY=strict-origin-when-cross-origin
SECURITY_PERMISSIONS_POLICY=accelerometer=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(self), payment=(), usb=()

# WebSocket Security
WEBSOCKET_ORIGIN_VALIDATION=true

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_AUTH_REQUESTS_PER_MINUTE=10

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# For production, use PostgreSQL or a managed database service
# Format: postgresql://user:password@host:port/database
DATABASE_URL="postgresql://user:password@localhost:5432/learning_voice_agent"

# -----------------------------------------------------------------------------
# Redis (for rate limiting and session caching)
# -----------------------------------------------------------------------------
REDIS_URL="redis://localhost:6379/0"
REDIS_TTL=1800

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000

# -----------------------------------------------------------------------------
# API Keys - External Services
# -----------------------------------------------------------------------------
# Anthropic Claude API
ANTHROPIC_API_KEY="<YOUR_ANTHROPIC_API_KEY>"

# OpenAI (for Whisper transcription)
OPENAI_API_KEY="<YOUR_OPENAI_API_KEY>"

# Tavily API (for web search - optional)
TAVILY_API_KEY="<YOUR_TAVILY_API_KEY>"

# -----------------------------------------------------------------------------
# Twilio Configuration (Optional - for voice support)
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID="<YOUR_TWILIO_ACCOUNT_SID>"
TWILIO_AUTH_TOKEN="<YOUR_TWILIO_AUTH_TOKEN>"
TWILIO_PHONE_NUMBER="+1234567890"

# -----------------------------------------------------------------------------
# Audio Processing
# -----------------------------------------------------------------------------
WHISPER_MODEL=whisper-1
MAX_AUDIO_DURATION=60

# -----------------------------------------------------------------------------
# Claude Configuration
# -----------------------------------------------------------------------------
CLAUDE_MODEL=claude-3-haiku-20240307
CLAUDE_MAX_TOKENS=150
CLAUDE_TEMPERATURE=0.7

# -----------------------------------------------------------------------------
# Session Management
# -----------------------------------------------------------------------------
SESSION_TIMEOUT=180
MAX_CONTEXT_EXCHANGES=5

# -----------------------------------------------------------------------------
# Vector Database Configuration (Week 3)
# -----------------------------------------------------------------------------
CHROMA_PERSIST_DIR=./chroma_db
EMBEDDING_MODEL=all-MiniLM-L6-v2
SEMANTIC_SEARCH_THRESHOLD=0.5
ENABLE_VECTOR_SEARCH=true

# -----------------------------------------------------------------------------
# Advanced Prompts Configuration (Week 3)
# -----------------------------------------------------------------------------
USE_CHAIN_OF_THOUGHT=true
USE_FEW_SHOT=true
PROMPT_STRATEGY=adaptive

# -----------------------------------------------------------------------------
# Offline/PWA Configuration (Week 3)
# -----------------------------------------------------------------------------
OFFLINE_CACHE_MAX_ENTRIES=100
ENABLE_OFFLINE_MODE=true

# =============================================================================
# END OF CONFIGURATION
# =============================================================================
# CHECKLIST BEFORE DEPLOYMENT:
# [ ] Generated unique JWT_SECRET_KEY (32+ chars)
# [ ] Generated unique JWT_REFRESH_SECRET_KEY (different from above)
# [ ] Updated CORS_ORIGINS with production domain(s)
# [ ] Configured database connection string
# [ ] Configured Redis connection string
# [ ] Set all required API keys
# [ ] Verified SECURITY_HEADERS_ENABLED=true
# [ ] Verified RATE_LIMIT_ENABLED=true
# =============================================================================
